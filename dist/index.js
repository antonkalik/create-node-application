#!/usr/bin/env node
var r=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var f=r((wt,b)=>{var he=()=>(console.log("\x1B[34m%s\x1B[0m","#######################################"),console.log("\x1B[34m%s\x1B[0m","#                                     #"),console.log("\x1B[34m%s\x1B[36;1m%s\x1B[34m%s\x1B[0m","#       ","Create Node Application!","      #"),console.log("\x1B[34m%s\x1B[0m","#                                     #"),console.log("\x1B[34m%s\x1B[0m","#######################################"),console.log("\x1B[34m%s\x1B[0m","#                                     #"),console.log("\x1B[34m%s\x1B[36;1m%s\x1B[34m%s\x1B[0m","#      ","Anton Kalik Development","        #"),console.log("\x1B[34m%s\x1B[0m","#                                     #"),console.log("\x1B[34m%s\x1B[0m","#######################################"),new Promise(e=>{setTimeout(()=>{e()},1e3)}));b.exports=he});var y=r((yt,w)=>{function ve(e){return e.reduce((t,s)=>{let[o,i]=s.replace(/^-+/,"").split("=");return t[o]=isNaN(i)?i:Number(i),t},{})}w.exports=ve});var p=r((ht,h)=>{var qe={text:function(...e){console.log("\x1B[1m%s\x1B[0m",e.join(" "))},error:(...e)=>{console.log("\x1B[31;1m%s\x1B[0m",e.join(" "))},success:(...e)=>{console.log("\x1B[32;1m%s\x1B[0m",e.join(" "))},dim:(...e)=>{console.log("\x1B[2m%s\x1B[0m",e.join(" "))}};h.exports=qe});var q=r((vt,v)=>{function je(e,t=50){process.stdout.write("\x1B[90m"+e+"\x1B[0m ");let s=0,o=setInterval(()=>{s<t?(process.stdout.write("\x1B[90m.\x1B[0m"),s++):clearInterval(o)},500);return o}v.exports=je});var k=r((qt,j)=>{var l=p();j.exports=function(e){l.dim(`
--------------------------------------------------
`),l.dim("Run 'cd",e,"' to enter the application folder."),l.dim("Run 'npm run build' to build the application."),l.dim("Run 'npm run dev' to start the application.")}});var C=r((jt,D)=>{var c=p(),ke=()=>{c.dim(`
--------------------------------------------------
`),c.dim("Feel free to contact me:"),c.text("github.com/antonkalik"),c.text("twitter.com/idedycom"),c.text("antonkalik@gmail.com"),c.dim(`
--------------------------------------------------
`),c.dim(`Happy coding!
`)};D.exports=ke});var F=r((kt,R)=>{var{exec:De}=require("child_process");function Ce(e,t,s,o){let i=De(e,{cwd:t});i.stdout.on("data",a=>{s(a)}),i.stderr.on("data",a=>{s(a)}),i.on("exit",o)}R.exports=Ce});var n=r((Dt,_)=>{var Re=require("fs").promises,Fe=require("path");async function _e(e={},t,s){let o;if(typeof e=="string")o=e;else try{o=JSON.stringify(e,null,2)}catch{throw new Error("Provided content cannot be stringified to JSON.")}await Re.writeFile(Fe.join(t,s),o)}_.exports=_e});var P=r((Ct,S)=>{var Se=n();S.exports=e=>Se("node_modules/*",e,".eslintignore")});var E=r((Rt,O)=>{var Pe=n();O.exports=function(e){return Pe({env:{es6:!0,node:!0,mocha:!0,jest:!0},extends:["eslint:recommended","plugin:@typescript-eslint/eslint-recommended"],parser:"@typescript-eslint/parser",parserOptions:{ecmaVersion:2018},plugins:["prettier","@typescript-eslint"],rules:{"no-undef":2,"no-unused-vars":"off","no-useless-escape":0,"prettier/prettier":"error","@typescript-eslint/no-unused-vars":["error",{vars:"all",args:"after-used",ignoreRestSiblings:!1}]}},e,"eslintrc.json")}});var N=r((Ft,I)=>{var Oe=n();I.exports=e=>Oe(`
# Main
/.idea/
/node_modules/
.DS_Store
/dist

# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/

# TypeScript v1 declaration files
typings/

# TypeScript cache
*.tsbuildinfo

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variables file
.env
.env.test

# parcel-bundler cache (https://parceljs.org/)
.cache

# Next.js build output
.next

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and *not* Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port
`,e,".gitignore")});var M=r((_t,T)=>{var Ee=n();T.exports=function(e){return Ee({clearMocks:!0,transform:{"^.+\\.ts?$":"ts-jest"},testRegex:"(/__tests__/.*|(\\.|/)(test|spec))\\.ts?$",testPathIgnorePatterns:["\\\\node_modules\\\\"],coverageDirectory:"coverage",verbose:!0,testURL:"http://localhost/",testEnvironment:"node",modulePaths:["./"],moduleNameMapper:{"/^src/(.*)$/":"<rootDir>/src/$1"}},e,"jest.config.json")}});var J=r((St,$)=>{var Ie=n();$.exports=function(e){return Ie({watch:["src/"]},e,"nodemon.json")}});var A=r((Pt,L)=>{var Ne=n();L.exports=e=>Ne("v18.17.1",e,".nvmrc")});var B=r((Ot,W)=>{var Te=n();W.exports=function(e){return Te({singleQuote:!0,trailingComma:"es5",printWidth:100,arrowParens:"avoid",overrides:[{files:".prettierrc",options:{parser:"json",jsxBracketSameLine:!1}}]},e,".prettierrc")}});var K=r((Et,G)=>{var Me=n();G.exports=e=>Me(`**/*.md
**/*.svg
**/*.html
**/*.ejs`,e,".prettierignore")});var V=r((It,U)=>{var $e=n();U.exports=function(e){return $e({compilerOptions:{outDir:"./dist",sourceMap:!0,rootDir:".",noImplicitAny:!1,module:"commonjs",target:"es6",moduleResolution:"node",esModuleInterop:!0,strict:!0,typeRoots:["node_modules/@types","src/@types"],useUnknownInCatchVariables:!1,skipLibCheck:!0,baseUrl:"./",paths:{"src/*":["src/*"]},types:["node","jest"]},include:["src/**/*"],exclude:["node_modules","**/*.spec.ts"]},e,"tsconfig.json")}});var z=r((Nt,H)=>{var Je=n();H.exports=function(e){return Je({rules:{"no-unreachable":!0}},e,"tslint.json")}});var X=r((Tt,Y)=>{var Le=require("path"),Q=require("fs").promises;function Ae(e){let t=Le.join(e,"package.json");return Q.readFile(t,"utf8").then(s=>{let o=JSON.parse(s);return o.scripts={start:"node dist/index.js",build:"esbuild src/index.ts --bundle --platform=node --outfile=dist/index.js",dev:"nodemon -r ts-node/register src/index.ts",lint:"eslint 'src/**/*.{ts,tsx}'","lint:fix":"eslint 'src/**/*.{ts,tsx}' --fix",format:"prettier --write 'src/**/*.{ts,tsx}'"},Q.writeFile(t,JSON.stringify(o,null,2))})}Y.exports=Ae});var te=r((Mt,ee)=>{var Z=p(),We=P(),Be=E(),Ge=N(),Ke=M(),Ue=J(),Ve=A(),He=B(),ze=K(),Qe=V(),Ye=z(),Xe=X();ee.exports=async e=>{try{await Promise.all([Xe,We,Be,Ge,Ke,Ue,Ve,He,ze,Qe,Ye].map(t=>t(e))),Z.success("Done!")}catch(t){Z.error("Error writing files:",t)}}});var se=r(($t,re)=>{var Ze=`
import express from 'express';

const app = express();
const PORT = 3000;

app.get('/', (req, res) => res.send('Hello World!'));

app.listen(PORT, () => {
    console.log(\`App listening at http://localhost:\${PORT}\`);
});
`;re.exports=Ze});var ne=r((Jt,oe)=>{var et=`
import Koa, { ExtendableContext } from 'koa';
import Router from 'koa-router';
import bodyParser from 'koa-bodyparser';
import cors from '@koa/cors';

const port = process.env.PORT || 9999;

const app = new Koa();
const router = new Router();

app.use(cors());
app.use(router.routes());
app.use(bodyParser());

app.on('error', (error: Error, ctx: ExtendableContext) => {
  console.error('SERVER_ERROR', error, ctx);
});

app.listen(port || 9999);
`;oe.exports=et});var ce=r((Lt,ie)=>{var tt=se(),rt=ne(),st={express:tt,koa:rt};function ot(e){if(!e)throw new Error("Should provide framework");let t=st[e];if(!t)throw new Error(`Framework ${e} is not supported`);return t}ie.exports=ot});var le=r((At,ae)=>{var pe=["typescript","@types/node","esbuild","ts-node","nodemon","eslint","@typescript-eslint/parser","@typescript-eslint/eslint-plugin","eslint-config-prettier","eslint-plugin-prettier","prettier"];function nt(e){if(!e)throw new Error("Framework is not defined!");let s={express:{dependencies:["express","body-parser","cors"],devDependencies:["@types/express","@types/body-parser","@types/cors"]},koa:{dependencies:["koa","koa-router","koa-bodyparser","@koa/cors"],devDependencies:["@types/koa","@types/koa-router","@types/koa-bodyparser","@types/koa-cors"]}}[e];if(!s)throw new Error("Framework is not valid!");return{dependencies:[...pe,...s.dependencies],devDependencies:[...pe,...s.devDependencies]}}ae.exports=nt});var me=r((Wt,de)=>{var d=require("path"),u=require("fs"),m=p(),{execSync:it}=require("child_process"),g=q(),ct=k(),pt=C(),ue=F(),at=te(),lt=ce(),ut=le();function dt(e,t){let s=d.join(process.cwd(),e);if(!u.existsSync(s))u.mkdirSync(s,{recursive:!0}),u.mkdirSync(d.join(s,"src"));else{m.error(`Folder ${e} already exists!`);return}it("npm init -y",{cwd:s});let o=g("\u2022 Installing dependencies"),{dependencies:i,devDependencies:a}=ut(t);ue(`npm i ${i.join(" ")}`,s,()=>{},()=>{clearInterval(o),m.success("Done!");let we=g("\u2022 Installing devDependencies");ue(`npm install -D ${a.join(" ")}`,s,x=>{},()=>{clearInterval(we),m.success("Done!");let x=g("\u2022 Writing files");at(s).then(()=>{clearInterval(x)}).then(()=>{let ye=lt(t);u.writeFileSync(d.join(s,"src","index.ts"),ye.trim()),ct(e),pt()})})})}de.exports=dt});var mt=f(),gt=y(),xt=me(),be=p(),[fe,...bt]=process.argv.slice(2);fe||(be.error("No application name specified!"),process.exit(1));var ge=gt(bt),xe=ge.framework||ge.fw||"express";mt().then(()=>{be.text(`
Creating`,xe,`application started!
`),xt(fe,xe)});
