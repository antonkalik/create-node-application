#!/usr/bin/env node
var r=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var b=r((wt,x)=>{var he=()=>(console.log("\x1B[34m%s\x1B[0m","#######################################"),console.log("\x1B[34m%s\x1B[0m","#                                     #"),console.log("\x1B[34m%s\x1B[36;1m%s\x1B[34m%s\x1B[0m","#       ","Create Node Application!","      #"),console.log("\x1B[34m%s\x1B[0m","#                                     #"),console.log("\x1B[34m%s\x1B[0m","#######################################"),console.log("\x1B[34m%s\x1B[0m","#                                     #"),console.log("\x1B[34m%s\x1B[36;1m%s\x1B[34m%s\x1B[0m","#      ","Anton Kalik Development","        #"),console.log("\x1B[34m%s\x1B[0m","#                                     #"),console.log("\x1B[34m%s\x1B[0m","#######################################"),new Promise(e=>{setTimeout(()=>{e()},1e3)}));x.exports=he});var w=r((yt,f)=>{function ve(e){return e.reduce((t,s)=>{let[o,i]=s.replace(/^-+/,"").split("=");return t[o]=isNaN(i)?i:Number(i),t},{})}f.exports=ve});var p=r((ht,y)=>{var qe={text:function(...e){console.log("\x1B[1m%s\x1B[0m",e.join(" "))},error:(...e)=>{console.log("\x1B[31;1m%s\x1B[0m",e.join(" "))},success:(...e)=>{console.log("\x1B[32;1m%s\x1B[0m",e.join(" "))},dim:(...e)=>{console.log("\x1B[2m%s\x1B[0m",e.join(" "))}};y.exports=qe});var v=r((vt,h)=>{function je(e,t=50){process.stdout.write("\x1B[90m"+e+"\x1B[0m ");let s=0,o=setInterval(()=>{s<t?(process.stdout.write("\x1B[90m.\x1B[0m"),s++):clearInterval(o)},500);return o}h.exports=je});var j=r((qt,q)=>{var l=p();q.exports=function(e){l.dim(`
--------------------------------------------------
`),l.dim("Run 'cd",e,"' to enter the application folder."),l.dim("Run 'npm run build' to build the application."),l.dim("Run 'npm run dev' to start the application.")}});var D=r((jt,k)=>{var c=p(),ke=()=>{c.dim(`
--------------------------------------------------
`),c.dim("Feel free to contact me:"),c.text("github.com/antonkalik"),c.text("twitter.com/idedycom"),c.text("antonkalik@gmail.com"),c.dim(`
--------------------------------------------------
`),c.dim(`Happy coding!
`)};k.exports=ke});var R=r((kt,C)=>{var{exec:De}=require("child_process");function Ce(e,t,s,o){let i=De(e,{cwd:t});i.stdout.on("data",a=>{s(a)}),i.stderr.on("data",a=>{s(a)}),i.on("exit",o)}C.exports=Ce});var n=r((Dt,F)=>{var Re=require("fs").promises,Fe=require("path");async function _e(e={},t,s){let o;if(typeof e=="string")o=e;else try{o=JSON.stringify(e,null,2)}catch{throw new Error("Provided content cannot be stringified to JSON.")}await Re.writeFile(Fe.join(t,s),o)}F.exports=_e});var S=r((Ct,_)=>{var Se=n();_.exports=e=>Se("node_modules/*",e,".eslintignore")});var O=r((Rt,P)=>{var Pe=n();P.exports=function(e){return Pe({env:{es6:!0,node:!0,mocha:!0,jest:!0},extends:["eslint:recommended","plugin:@typescript-eslint/eslint-recommended"],parser:"@typescript-eslint/parser",parserOptions:{ecmaVersion:2018},plugins:["prettier","@typescript-eslint"],rules:{"no-undef":2,"no-unused-vars":"off","no-useless-escape":0,"prettier/prettier":"error","@typescript-eslint/no-unused-vars":["error",{vars:"all",args:"after-used",ignoreRestSiblings:!1}]}},e,"eslintrc.json")}});var I=r((Ft,E)=>{var Oe=n();E.exports=e=>Oe(`
# Main
/.idea/
/node_modules/
.DS_Store
/dist

# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/

# TypeScript v1 declaration files
typings/

# TypeScript cache
*.tsbuildinfo

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variables file
.env
.env.test

# parcel-bundler cache (https://parceljs.org/)
.cache

# Next.js build output
.next

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and *not* Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port
`,e,".gitignore")});var T=r((_t,N)=>{var Ee=n();N.exports=function(e){return Ee({clearMocks:!0,transform:{"^.+\\.ts?$":"ts-jest"},testRegex:"(/__tests__/.*|(\\.|/)(test|spec))\\.ts?$",testPathIgnorePatterns:["\\\\node_modules\\\\"],coverageDirectory:"coverage",verbose:!0,testURL:"http://localhost/",testEnvironment:"node",modulePaths:["./"],moduleNameMapper:{"/^src/(.*)$/":"<rootDir>/src/$1"}},e,"jest.config.json")}});var $=r((St,M)=>{var Ie=n();M.exports=function(e){return Ie({watch:["src/"]},e,"nodemon.json")}});var L=r((Pt,J)=>{var Ne=n();J.exports=e=>Ne("v18.17.1",e,".nvmrc")});var W=r((Ot,A)=>{var Te=n();A.exports=function(e){return Te({singleQuote:!0,trailingComma:"es5",printWidth:100,arrowParens:"avoid",overrides:[{files:".prettierrc",options:{parser:"json",jsxBracketSameLine:!1}}]},e,".prettierrc")}});var G=r((Et,B)=>{var Me=n();B.exports=e=>Me(`**/*.md
**/*.svg
**/*.html
**/*.ejs`,e,".prettierignore")});var U=r((It,K)=>{var $e=n();K.exports=function(e){return $e({compilerOptions:{outDir:"./dist",sourceMap:!0,rootDir:".",noImplicitAny:!1,module:"commonjs",target:"es6",moduleResolution:"node",esModuleInterop:!0,strict:!0,typeRoots:["node_modules/@types","src/@types"],useUnknownInCatchVariables:!1,skipLibCheck:!0,baseUrl:"./",paths:{"src/*":["src/*"]},types:["node","jest"]},include:["src/**/*"],exclude:["node_modules","**/*.spec.ts"]},e,"tsconfig.json")}});var H=r((Nt,V)=>{var Je=n();V.exports=function(e){return Je({rules:{"no-unreachable":!0}},e,"tslint.json")}});var Y=r((Tt,Q)=>{var Le=require("path"),z=require("fs").promises;function Ae(e){let t=Le.join(e,"package.json");return z.readFile(t,"utf8").then(s=>{let o=JSON.parse(s);return o.scripts={start:"node dist/index.js",build:"esbuild src/index.ts --bundle --platform=node --outfile=dist/index.js",dev:"nodemon -r ts-node/register src/index.ts",lint:"eslint 'src/**/*.{ts,tsx}'","lint:fix":"eslint 'src/**/*.{ts,tsx}' --fix",format:"prettier --write 'src/**/*.{ts,tsx}'"},z.writeFile(t,JSON.stringify(o,null,2))})}Q.exports=Ae});var ee=r((Mt,Z)=>{var X=p(),We=S(),Be=O(),Ge=I(),Ke=T(),Ue=$(),Ve=L(),He=W(),ze=G(),Qe=U(),Ye=H(),Xe=Y();Z.exports=async e=>{try{await Promise.all([Xe,We,Be,Ge,Ke,Ue,Ve,He,ze,Qe,Ye].map(t=>t(e))),X.success("Done!")}catch(t){X.error("Error writing files:",t)}}});var re=r(($t,te)=>{var Ze=`
import express from 'express';

const app = express();
const PORT = 3000;

app.get('/', (req, res) => res.send('Hello World!'));

app.listen(PORT, () => {
    console.log(\`App listening at http://localhost:\${PORT}\`);
});
`;te.exports=Ze});var oe=r((Jt,se)=>{var et=`
import Koa, { ExtendableContext } from 'koa';
import Router from 'koa-router';
import bodyParser from 'koa-bodyparser';
import cors from '@koa/cors';

const port = process.env.PORT || 9999;

const app = new Koa();
const router = new Router();

app.use(cors());
app.use(router.routes());
app.use(bodyParser());

app.on('error', (error: Error, ctx: ExtendableContext) => {
  console.error('SERVER_ERROR', error, ctx);
});

app.listen(port || 9999);
`;se.exports=et});var ie=r((Lt,ne)=>{var tt=re(),rt=oe(),st={express:tt,koa:rt};function ot(e){if(!e)throw new Error("Should provide framework");let t=st[e];if(!t)throw new Error(`Framework ${e} is not supported`);return t}ne.exports=ot});var ae=r((At,pe)=>{var ce=["typescript","@types/node","esbuild","ts-node","nodemon","eslint","@typescript-eslint/parser","@typescript-eslint/eslint-plugin","eslint-config-prettier","eslint-plugin-prettier","prettier"];function nt(e){if(!e)throw new Error("Framework is not defined!");let s={express:{dependencies:["express","body-parser","cors"],devDependencies:["@types/express","@types/body-parser","@types/cors"]},koa:{dependencies:["koa","koa-router","koa-bodyparser","@koa/cors"],devDependencies:["@types/koa","@types/koa-router","@types/koa-bodyparser","@types/koa-cors"]}}[e];if(!s)throw new Error("Framework is not valid!");return{dependencies:[...ce,...s.dependencies],devDependencies:[...ce,...s.devDependencies]}}pe.exports=nt});var de=r((Wt,ue)=>{var d=require("path"),u=require("fs"),m=p(),{execSync:it}=require("child_process"),g=v(),ct=j(),pt=D(),le=R(),at=ee(),lt=ie(),ut=ae();function dt(e,t){let s=d.join(process.cwd(),e);if(!u.existsSync(s))u.mkdirSync(s,{recursive:!0}),u.mkdirSync(d.join(s,"src"));else{m.error(`Folder ${e} already exists!`);return}it("npm init -y",{cwd:s});let o=g("\u2022 Installing dependencies"),{dependencies:i,devDependencies:a}=ut(t);le(`npm i ${i.join(" ")}`,s,()=>{},()=>{clearInterval(o),m.success("Done!");let fe=g("\u2022 Installing devDependencies");le(`npm install -D ${a.join(" ")}`,s,()=>{},()=>{clearInterval(fe),m.success("Done!");let we=g("\u2022 Writing files");at(s).then(()=>{clearInterval(we)}).then(()=>{let ye=lt(t);u.writeFileSync(d.join(s,"src","index.ts"),ye.trim()),ct(e),pt()})})})}ue.exports=dt});var mt=b(),gt=w(),xt=de(),xe=p(),[be,...bt]=process.argv.slice(2);be||(xe.error("No application name specified!"),process.exit(1));var me=gt(bt),ge=me.framework||me.fw||"express";mt().then(()=>{xe.text(`
Creating`,ge,`application started!
`),xt(be,ge)});
